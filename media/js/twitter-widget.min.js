if(false in window)window.console={log:function(){}};TWTR=window.TWTR||{};if(!Array.forEach){Array.prototype.forEach=function(n,h){for(var q=h||window,m=0,k=this.length;m<k;++m)n.call(q,this[m],m,this)};Array.prototype.filter=function(n,h){for(var q=h||window,m=[],k=0,r=this.length;k<r;++k)n.call(q,this[k],k,this)&&m.push(this[k]);return m};Array.prototype.indexOf=function(n){for(var h=0;h<this.length;++h)if(this[h]===n)return h;return-1}}
(function(){function n(h,q,m){this.el=h;this.prop=q;this.from=m.from;this.to=m.to;this.time=m.time;this.callback=m.callback;this.animDiff=this.to-this.from}if(!(TWTR&&TWTR.Widget)){n.canTransition=function(){var h=document.createElement("twitter");h.style.cssText="-webkit-transition: all .5s linear;";return!!h.style.webkitTransitionProperty}();n.prototype._setStyle=function(h){switch(this.prop){case "opacity":this.el.style[this.prop]=h;this.el.style.filter="alpha(opacity="+h*100+")";break;default:this.el.style[this.prop]=
h+"px"}};n.prototype._animate=function(){this.now=new Date;this.diff=this.now-this.startTime;if(this.diff>this.time){this._setStyle(this.to);this.callback&&this.callback.call(this);clearInterval(this.timer)}else{this.percentage=Math.floor(this.diff/this.time*100)/100;this.val=this.animDiff*this.percentage+this.from;this._setStyle(this.val)}};n.prototype.start=function(){var h=this;this.startTime=new Date;this.timer=setInterval(function(){h._animate.call(h)},15)};TWTR.Widget=function(h){this.init(h)};
(function(){function h(b,d,e){this.job=b;this.decayFn=d;this.interval=e;this.decayRate=1;this.decayMultiplier=1.25;this.maxDecayTime=18E4}function q(b,d,e,i){this.time=d||6E3;this.loop=e||false;this.repeated=0;this.total=b.length;this.callback=i;this.haystack=b}function m(b){if(r)b.avatar=b.avatar.replace(y,z);b='<div class="twtr-tweet-wrap">         <div class="twtr-avatar">           <div class="twtr-img"><a target="_blank" href="http://twitter.com/'+b.user+'"><img alt="'+b.user+' profile" src="'+
b.avatar+'"></a></div>         </div>         <div class="twtr-tweet-text">           <p>             <a target="_blank" href="http://twitter.com/'+b.user+'" class="twtr-user">'+b.user+"</a> "+b.tweet+'             <em>            <a target="_blank" class="twtr-timestamp" time="'+b.timestamp+'" href="http://twitter.com/'+b.user+"/status/"+b.id+'">'+b.created_at+'</a>             <a target="_blank" class="twtr-reply" href="http://twitter.com/?status=@'+b.user+"%20&in_reply_to_status_id="+b.id+"&in_reply_to="+
b.user+'">reply</a>             </em> '+(b.needle.metadata&&b.needle.metadata.result_type&&b.needle.metadata.result_type=="popular"?'<span class="twtr-popular">'+b.needle.metadata.recent_retweets+"+ recent retweets</span>":"")+"           </p>         </div>       </div>";var d=document.createElement("div");d.id="tweet-id-"+ ++m._tweetCount;d.className="twtr-tweet";d.innerHTML=b;this.element=d}var k={},r=location.protocol.match(/https/),y=/^.+\/profile_images/,z="https://s3.amazonaws.com/twitter_production/profile_images",
A={},B=function(b,d,e,i){d=d||"*";e=e||document;var l=[];d=e.getElementsByTagName(d);e=A[b];if(!e){e=RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)");A[b]=e}b=e;e=0;for(var t=d.length;e<t;++e)if(b.test(d[e].className)){l[l.length]=d[e];i&&i.call(d[e],d[e])}return l},p={ie:navigator.userAgent.match(/MSIE\s([^;]*)/)},s=function(b){if(typeof b=="string")return document.getElementById(b);return b},w=function(){var b=self.innerHeight,d=document.compatMode;if(d||p.ie)b=d=="CSS1Compat"?document.documentElement.clientHeight:
document.body.clientHeight;return b},u=function(b){try{b.parentNode.removeChild(b)}catch(d){}},C=function(b){var d,e=b.relatedTarget;if(!e)if(b.type=="mouseout")e=b.toElement;else if(b.type=="mouseover")e=b.fromElement;a:{try{d=e&&3==e.nodeType?e.parentNode:e;break a}catch(i){}d=void 0}for(;d&&d!=this;)try{d=d.parentNode}catch(l){d=this}if(d!=this)return true;return false},F=function(){if(document.defaultView&&document.defaultView.getComputedStyle)return function(b,d){var e=null,i=document.defaultView.getComputedStyle(b,
"");if(i)e=i[d];return b.style[d]||e};else if(document.documentElement.currentStyle&&p.ie)return function(b,d){var e=b.currentStyle?b.currentStyle[d]:null;return b.style[d]||e}}(),o={has:function(b,d){return RegExp("(^|\\s)"+d+"(\\s|$)").test(s(b).className)},add:function(b,d){if(!this.has(b,d)){var e=s(b),i;i=s(b).className.replace(/^\s+|\s+$/g,"");e.className=i+" "+d}},remove:function(b,d){if(this.has(b,d))s(b).className=s(b).className.replace(RegExp("(^|\\s)"+d+"(\\s|$)","g"),"")}},v={add:function(b,
d,e){b.addEventListener?b.addEventListener(d,e,false):b.attachEvent("on"+d,function(){e.call(b,window.event)})},remove:function(b,d,e){b.removeEventListener?b.removeEventListener(d,e,false):b.detachEvent("on"+d,e)}},G=function(){return function(b){return[parseInt(b.substring(0,2),16),parseInt(b.substring(2,4),16),parseInt(b.substring(4,6),16)]}}(),g={bool:function(b){return typeof b==="boolean"},def:function(b){return typeof b!=="undefined"},number:function(b){return typeof b==="number"&&isFinite(b)},
string:function(b){return typeof b==="string"},fn:function(b){return typeof b==="function"},array:function(b){if(b)return g.number(b.length)&&g.fn(b.splice);return false}},H=["January","February","March","April","May","June","July","August","September","October","November","December"],I=function(b){var d=new Date(b);if(p.ie)d=Date.parse(b.replace(/( \+)/," UTC$1"));var e="";b=function(){var l=d.getHours();if(l>0&&l<13){e="am";return l}else if(l<1){e="am";return 12}else{e="pm";return l-12}}();var i=
d.getMinutes();d.getSeconds();return b+":"+i+e+function(){var l=new Date;return l.getDate()!=d.getDate()||l.getYear()!=d.getYear()||l.getMonth()!=d.getMonth()?" - "+H[d.getMonth()]+" "+d.getDate()+", "+d.getFullYear():""}()},D=function(b){var d=new Date,e=new Date(b);if(p.ie)e=Date.parse(b.replace(/( \+)/," UTC$1"));b=d-e;if(isNaN(b)||b<0)return"";if(b<7E3)return"right now";if(b<6E4)return Math.floor(b/1E3)+" seconds ago";if(b<12E4)return"about 1 minute ago";if(b<36E5)return Math.floor(b/6E4)+" minutes ago";
if(b<72E5)return"about 1 hour ago";if(b<864E5)return Math.floor(b/36E5)+" hours ago";if(b>864E5&&b<1728E5)return"yesterday";return b<31536E6?Math.floor(b/864E5)+" days ago":"over a year ago"},E={link:function(b){return b.replace(/\b(((https*\:\/\/)|www\.)[^\"\']+?)(([!?,.\)]+)?(\s|$))/g,function(d,e,i,l,t){return'<a class="twtr-hyperlink" target="_blank" href="'+(i.match(/w/)?"http://":"")+e+'">'+(e.length>25?e.substr(0,24)+"...":e)+"</a>"+t})},at:function(b){return b.replace(/\B\@([a-zA-Z0-9_]{1,20})/g,
function(d,e){return'@<a target="_blank" class="twtr-atreply" href="http://twitter.com/'+e+'">'+e+"</a>"})},list:function(b){return b.replace(/\B\@([a-zA-Z0-9_]{1,20}\/\w+)/g,function(d,e){return'@<a target="_blank" class="twtr-atreply" href="http://twitter.com/'+e+'">'+e+"</a>"})},hash:function(b){return b.replace(/(\s+)\#(\w+)/gi,function(d,e,i){return e+'<a target="_blank" class="twtr-hashtag" href="http://twitter.com/search?q=%23'+i+'">#'+i+"</a>"})},clean:function(b){return this.hash(this.at(this.list(this.link(b))))}};
h.prototype={start:function(){this.stop().run();return this},stop:function(){this.worker&&window.clearTimeout(this.worker);return this},run:function(){var b=this;this.job(function(){b.decayRate=b.decayFn()?Math.max(1,b.decayRate/b.decayMultiplier):b.decayRate*b.decayMultiplier;var d=b.interval*b.decayRate;d=d>=b.maxDecayTime?b.maxDecayTime:d;d=Math.floor(d);b.worker=window.setTimeout(function(){b.run.call(b)},d)})},destroy:function(){this.stop();this.decayRate=1;return this}};q.prototype={start:function(b){var d=
this;if(b)this.repeated=0;this.stop()._job();this.timer=window.setInterval(function(){d._job.call(d)},this.time);return this},stop:function(){this.timer&&window.clearInterval(this.timer);return this},_job:function(){if(this.repeated===this.total)if(this.loop)this.repeated=0;else{this.stop();return}this.callback(this.haystack[this.repeated]);this.repeated++;return this}};m._tweetCount=0;k.loadStyleSheet=function(b,d){if(!TWTR.Widget.loadingStyleSheet){TWTR.Widget.loadingStyleSheet=true;var e=document.createElement("link");
e.href=b;e.rel="stylesheet";e.type="text/css";document.getElementsByTagName("head")[0].appendChild(e);var i=setInterval(function(){if(F(d,"position")=="relative"){clearInterval(i);TWTR.Widget.hasLoadedStyleSheet=true}},50)}};(function(){var b=false;k.css=function(d){var e=document.createElement("style");e.type="text/css";if(p.ie)e.styleSheet.cssText=d;else{var i=document.createDocumentFragment();i.appendChild(document.createTextNode(d));e.appendChild(i)}!p.ie||b?document.getElementsByTagName("head")[0].appendChild(e):
window.attachEvent("onload",function(){b=true;document.getElementsByTagName("head")[0].appendChild(e)})}})();TWTR.Widget.isLoaded=false;TWTR.Widget.loadingStyleSheet=false;TWTR.Widget.hasLoadedStyleSheet=false;TWTR.Widget.WIDGET_NUMBER=0;TWTR.Widget.matches={mentions:/^@[a-zA-Z0-9_]{1,20}\b/,any_mentions:/\b@[a-zA-Z0-9_]{1,20}\b/};TWTR.Widget.jsonP=function(b,d){var e=document.createElement("script");e.type="text/javascript";e.src=b;document.getElementsByTagName("head")[0].appendChild(e);d(e);return e};
TWTR.Widget.prototype=function(){var b=r?"https://":"http://",d=b+"search.twitter.com/search.",e=b+"api.twitter.com/1/statuses/user_timeline.",i=b+"twitter.com/favorites/",l=b+"twitter.com/",t=r?"https://twitter-widgets.s3.amazonaws.com/j/1/default.gif":"http://widgets.twimg.com/j/1/default.gif";return{init:function(a){var c=this;this._widgetNumber=++TWTR.Widget.WIDGET_NUMBER;TWTR.Widget["receiveCallback_"+this._widgetNumber]=function(f){c._prePlay.call(c,f)};this._cb="TWTR.Widget.receiveCallback_"+
this._widgetNumber;this.opts=a;this._base=d;this._profileImage=this._rendered=this._hasOfficiallyStarted=this._isRunning=false;this._isCreator=!!a.creator;this._setWidgetType(a.type);this.timesRequested=0;this.newResults=this.runOnce=false;this.results=[];this.jsonMaxRequestTimeOut=19E3;this.showedResults=[];this.sinceId=1;this.source="TWITTERINC_WIDGET";this.id=a.id||"twtr-widget-"+this._widgetNumber;this.tweets=0;this.setDimensions(a.width,a.height);this.interval=a.interval||6E3;this.format="json";
this.rpp=a.rpp||50;this.subject=a.subject||"";this.title=a.title||"";this.setFooterText(a.footer);this.setSearch(a.search);this._setUrl();this.theme=a.theme?a.theme:this._getDefaultTheme();a.id||document.write('<div class="twtr-widget" id="'+this.id+'"></div>');this.widgetEl=s(this.id);a.id&&o.add(this.widgetEl,"twtr-widget");if(a.version>=2&&!TWTR.Widget.hasLoadedStyleSheet)r?k.loadStyleSheet("https://twitter-widgets.s3.amazonaws.com/j/2/widget.css",this.widgetEl):k.loadStyleSheet("http://widgets.twimg.com/j/2/widget.css",
this.widgetEl);this.occasionalJob=new h(function(f){c.decay=f;c._getResults.call(c)},function(){return c._decayDecider.call(c)},25E3);this._ready=g.fn(a.ready)?a.ready:function(){};this._isRelativeTime=true;this._tweetFilter=false;this._avatars=true;this._isFullScreen=false;this._isLive=true;this._isScroll=false;this._loop=true;this._showTopTweets=this._isSearchWidget?true:false;this._behavior="default";this.setFeatures(this.opts.features);return this},setDimensions:function(a,c){this.wh=a&&c?[a,
c]:[250,300];this.wh[0]=a=="auto"||a=="100%"?"100%":(this.wh[0]<150?150:this.wh[0])+"px";this.wh[1]=(this.wh[1]<100?100:this.wh[1])+"px";return this},setRpp:function(a){a=parseInt(a);this.rpp=g.number(a)&&a>0&&a<=100?a:30;return this},_setWidgetType:function(a){this._isListWidget=this._isFavsWidget=this._isProfileWidget=this._isSearchWidget=false;switch(a){case "profile":this._isProfileWidget=true;break;case "search":this._isSearchWidget=true;this.search=this.opts.search;break;case "faves":case "favs":this._isFavsWidget=
true;break;case "list":case "lists":this._isListWidget=true}return this},setFeatures:function(a){if(a){if(g.def(a.filters))this._tweetFilter=a.filters;if(g.def(a.dateformat))this._isRelativeTime=a.dateformat!=="absolute";if(g.def(a.fullscreen)&&g.bool(a.fullscreen))if(a.fullscreen){this._isFullScreen=true;this.wh[0]="100%";this.wh[1]=w()-90+"px";var c=this;v.add(window,"resize",function(){c.wh[1]=w();c._fullScreenResize()})}if(g.def(a.loop)&&g.bool(a.loop))this._loop=a.loop;if(g.def(a.behavior)&&
g.string(a.behavior))switch(a.behavior){case "all":this._behavior="all";break;case "preloaded":this._behavior="preloaded";break;default:this._behavior="default"}if(g.def(a.toptweets)&&g.bool(a.toptweets)){var f=(this._showTopTweets=a.toptweets)?"inline-block":"none";k.css("#"+this.id+" .twtr-popular { display: "+f+"; }")}if(!g.def(a.toptweets)){f=(this._showTopTweets=true)?"inline-block":"none";k.css("#"+this.id+" .twtr-popular { display: "+f+"; }")}if(g.def(a.avatars)&&g.bool(a.avatars))if(a.avatars){k.css("#"+
this.id+" .twtr-avatar { display: block; } #"+this.id+" .twtr-user { display: inline; } #"+this.id+" .twtr-tweet-text { margin-left: "+(this._isFullScreen?"90px":"40px")+"; }");this._avatars=true}else{k.css("#"+this.id+" .twtr-avatar, #"+this.id+" .twtr-user { display: none; } #"+this.id+" .twtr-tweet-text { margin-left: 0; }");this._avatars=false}else if(this._isProfileWidget){this.setFeatures({avatars:false});this._avatars=false}else{this.setFeatures({avatars:true});this._avatars=true}g.def(a.hashtags)&&
g.bool(a.hashtags)&&!a.hashtags&&k.css("#"+this.id+" a.twtr-hashtag { display: none; }");if(g.def(a.timestamp)&&g.bool(a.timestamp))k.css("#"+this.id+" em { display: "+(a.timestamp?"block":"none")+"; }");if(g.def(a.live)&&g.bool(a.live))this._isLive=a.live;if(g.def(a.scrollbar)&&g.bool(a.scrollbar))this._isScroll=a.scrollbar}else{if(this._isProfileWidget){this.setFeatures({avatars:false});this._avatars=false}if(this._isProfileWidget||this._isFavsWidget)this.setFeatures({behavior:"all"})}return this},
_fullScreenResize:function(){B("twtr-timeline","div",document.body,function(a){a.style.height=w()-90+"px"})},setTweetInterval:function(a){this.interval=a;return this},setBase:function(a){this._base=a;return this},setUser:function(a,c){this.username=a;this.realname=c||" ";if(this._isFavsWidget)this.setBase(i+a+".");else this._isProfileWidget&&this.setBase(e+this.format+"?screen_name="+a);this.setSearch(" ");return this},setList:function(a,c){this.listslug=c.replace(/ /g,"-").toLowerCase();this.username=
a;this.setBase(l+a+"/lists/"+this.listslug+"/statuses.");this.setSearch(" ");return this},setProfileImage:function(a){this._profileImage=a;this.byClass("twtr-profile-img","img").src=r?a.replace(y,z):a;this.byClass("twtr-profile-img-anchor","a").href="http://twitter.com/"+this.username;return this},setTitle:function(a){this.title=a;this.widgetEl.getElementsByTagName("h3")[0].innerHTML=this.title;return this},setCaption:function(a){this.subject=a;this.widgetEl.getElementsByTagName("h4")[0].innerHTML=
this.subject;return this},setFooterText:function(a){this.footerText=g.def(a)&&g.string(a)?a:"Join the conversation";if(this._rendered)this.byClass("twtr-join-conv","a").innerHTML=this.footerText;return this},setSearch:function(a){this.searchString=a||"";this.search=encodeURIComponent(this.searchString);this._setUrl();if(this._rendered)this.byClass("twtr-join-conv","a").href="http://twitter.com/"+this._getWidgetPath();return this},_getWidgetPath:function(){return this._isProfileWidget?this.username:
this._isFavsWidget?this.username+"/favorites":this._isListWidget?this.username+"/lists/"+this.listslug:"#search?q="+this.search},_setUrl:function(){function a(){return c.sinceId==1?"":"&since_id="+c.sinceId+"&refresh=true"}var c=this;this.url=this._isProfileWidget?this._base+"&callback="+this._cb+"&include_rts=true&count="+this.rpp+a()+"&clientsource="+this.source:this._isFavsWidget||this._isListWidget?this._base+this.format+"?callback="+this._cb+a()+"&include_rts=true&clientsource="+this.source:
this._base+this.format+"?q="+this.search+"&result_type=mixed&include_rts=true&callback="+this._cb+"&rpp="+this.rpp+a()+"&clientsource="+this.source;return this},_getRGB:function(a){return G(a.substring(1,7))},setTheme:function(a,c){var f=" !important",j=window.location.hostname.match(/twitter\.com/)&&window.location.pathname.match(/goodies/);if(c||j)f="";this.theme={shell:{background:a.shell.background||this._getDefaultTheme().shell.background,color:a.shell.color||this._getDefaultTheme().shell.color},
tweets:{background:a.tweets.background||this._getDefaultTheme().tweets.background,color:a.tweets.color||this._getDefaultTheme().tweets.color,links:a.tweets.links||this._getDefaultTheme().tweets.links}};j="#"+this.id+" .twtr-doc,                      #"+this.id+" .twtr-hd a,                      #"+this.id+" h3,                      #"+this.id+" h4,                      #"+this.id+" .twtr-popular {            background-color: "+this.theme.shell.background+f+";            color: "+this.theme.shell.color+
f+";          }          #"+this.id+" .twtr-popular {            color: "+this.theme.tweets.color+f+";            background-color: rgba("+this._getRGB(this.theme.shell.background)+", .3)"+f+";          }          #"+this.id+" .twtr-tweet a {            color: "+this.theme.tweets.links+f+";          }          #"+this.id+" .twtr-bd, #"+this.id+" .twtr-timeline i a,           #"+this.id+" .twtr-bd p {            color: "+this.theme.tweets.color+f+";          }          #"+this.id+" .twtr-new-results,           #"+
this.id+" .twtr-results-inner,           #"+this.id+" .twtr-timeline {            background: "+this.theme.tweets.background+f+";          }";if(p.ie)j+="#"+this.id+" .twtr-tweet { background: "+this.theme.tweets.background+f+"; }";k.css(j);return this},byClass:function(a,c,f){a=B(a,c,s(this.id));return f?a:a[0]},render:function(){var a=this;if(!TWTR.Widget.hasLoadedStyleSheet){window.setTimeout(function(){a.render.call(a)},50);return this}this.setTheme(this.theme,this._isCreator);this._isProfileWidget&&
o.add(this.widgetEl,"twtr-widget-profile");this._isScroll&&o.add(this.widgetEl,"twtr-scroll");if(!this._isLive&&!this._isScroll)this.wh[1]="auto";if(this._isSearchWidget&&this._isFullScreen)document.title="Twitter search: "+escape(this.searchString);this.widgetEl.innerHTML=this._getWidgetHtml();this.spinner=this.byClass("twtr-spinner","div");var c=this.byClass("twtr-timeline","div");if(this._isLive&&!this._isFullScreen){var f=function(x){C.call(this,x)&&a.pause.call(a)},j=function(x){C.call(this,
x)&&a.resume.call(a)};this.removeEvents=function(){v.remove(c,"mouseover",f);v.remove(c,"mouseout",j)};v.add(c,"mouseover",f);v.add(c,"mouseout",j)}this._rendered=true;this._ready();return this},removeEvents:function(){},_getDefaultTheme:function(){return{shell:{background:"#8ec1da",color:"#ffffff"},tweets:{background:"#ffffff",color:"#444444",links:"#1985b5"}}},_getWidgetHtml:function(){var a='<div class="twtr-doc'+(this._isFullScreen?" twtr-fullscreen":"")+'" style="width: '+this.wh[0]+';">            <div class="twtr-hd">'+
(this._isProfileWidget?'<a target="_blank" href="http://twitter.com/" class="twtr-profile-img-anchor"><img alt="profile" class="twtr-profile-img" src="'+t+'"></a>                      <h3></h3>                      <h4></h4>':"<h3>"+this.title+"</h3><h4>"+this.subject+"</h4>")+'               <div class="twtr-spinner twtr-inactive"></div>            </div>            <div class="twtr-bd">              <div class="twtr-timeline" style="height: '+this.wh[1]+';">                <div class="twtr-tweets">                  <div class="twtr-reference-tweet"></div>                  <!-- tweets show here --\>                </div>              </div>            </div>            <div class="twtr-ft">              <div><a target="_blank" href="http://twitter.com"><img alt="" src="'+
(r?"https://twitter-widgets.s3.amazonaws.com/j/1/twitter_logo_s.":"http://widgets.twimg.com/j/1/twitter_logo_s.")+(p.ie?"gif":"png")+'"',c;c=this._isFullScreen?"":' height="15"';return a+c+'></a>                <span><a target="_blank" class="twtr-join-conv" style="color:'+this.theme.shell.color+'" href="http://twitter.com/'+this._getWidgetPath()+'">'+this.footerText+"</a></span>              </div>            </div>          </div>"},_appendTweet:function(a){var c=this.byClass("twtr-reference-tweet",
"div");c.parentNode.insertBefore(a,c.nextSibling);return this},_slide:function(a){var c=this,f=a.firstChild.offsetHeight;this.runOnce&&(new n(a,"height",{from:0,to:f,time:500,callback:function(){c._fade.call(c,a)}})).start();return this},_fade:function(a){if(n.canTransition){a.style.webkitTransition="opacity 0.5s ease-out";a.style.opacity=1;return this}(new n(a,"opacity",{from:0,to:1,time:500})).start();return this},_chop:function(){if(this._isScroll)return this;var a=this.byClass("twtr-tweet","div",
true),c=this.byClass("twtr-new-results","div",true);if(a.length){for(var f=a.length-1;f>=0;f--){var j=a[f];if(parseInt(j.offsetTop)>parseInt(this.wh[1]))u(j);else break}if(c.length>0){a=c[c.length-1];parseInt(a.offsetTop)>parseInt(this.wh[1])&&u(a)}}return this},_appendSlideFade:function(a){a=a||this.tweet.element;this._chop()._appendTweet(a)._slide(a);return this},_createTweet:function(a){a.timestamp=a.created_at;a.created_at=this._isRelativeTime?D(a.created_at):I(a.created_at);this.tweet=new m(a);
if(this._isLive&&this.runOnce){this.tweet.element.style.opacity=0;this.tweet.element.style.filter="alpha(opacity:0)";this.tweet.element.style.height="0"}return this},_getResults:function(){var a=this;this.timesRequested++;this.jsonRequestRunning=true;this.jsonRequestTimer=window.setTimeout(function(){if(a.jsonRequestRunning){clearTimeout(a.jsonRequestTimer);o.add(a.spinner,"twtr-inactive")}a.jsonRequestRunning=false;u(a.scriptElement);a.newResults=false;a.decay()},this.jsonMaxRequestTimeOut);o.remove(this.spinner,
"twtr-inactive");TWTR.Widget.jsonP(a.url,function(c){a.scriptElement=c})},clear:function(){var a=this.byClass("twtr-tweet","div",true),c=this.byClass("twtr-new-results","div",true);a=a.concat(c);a.forEach(function(f){u(f)});return this},_sortByLatest:function(a){this.results=a;this.results=this.results.slice(0,this.rpp);this.results.reverse();return this},_sortByMagic:function(a){a=a;var c=this;if(this._tweetFilter){if(this._tweetFilter.negatives)a=a.filter(function(f){if(!c._tweetFilter.negatives.test(f.text))return f});
if(this._tweetFilter.positives)a=a.filter(function(f){if(c._tweetFilter.positives.test(f.text))return f})}switch(this._behavior){case "all":this._sortByLatest(a);break;default:this._sortByDefault(a)}return this},_loadTopTweetsAtTop:function(a){var c=[];return a=a.filter(function(f){if(f.metadata&&f.metadata.result_type&&f.metadata.result_type=="popular")return f;else c.push(f)}).concat(c)},_sortByDefault:function(a){var c=function(){return p.ie?function(f){return Date.parse(f.replace(/( \+)/," UTC$1"))}:
function(f){return new Date(f)}}();this.results.unshift.apply(this.results,a);this.results.forEach(function(f){if(!f.views)f.views=0});this.results.sort(function(f,j){return c(f.created_at)<c(j.created_at)?1:c(f.created_at)>c(j.created_at)?-1:0});this.results=this.results.slice(0,this.rpp);this.results=this._loadTopTweetsAtTop(this.results);this._isLive||this.results.reverse();this.results.sort(function(f,j){if(f.views>j.views)return 1;else if(f.views<j.views)return-1;return 0})},_prePlay:function(a){this.jsonRequestTimer&&
clearTimeout(this.jsonRequestTimer);p.ie||u(this.scriptElement);if(a.error)this.newResults=false;else if(a.results&&a.results.length>0){this.response=a;this.intervalJob&&this.intervalJob.stop();this.newResults=true;this.sinceId=a.max_id;this._sortByMagic(a.results);this.isRunning()&&this._play()}else if((this._isProfileWidget||this._isFavsWidget||this._isListWidget)&&g.array(a)&&a.length>0){this.intervalJob&&this.intervalJob.stop();this.newResults=true;if(!this._profileImage&&this._isProfileWidget){var c=
a[0].user.screen_name;this.setProfileImage(a[0].user.profile_image_url);this.setTitle(a[0].user.name);this.setCaption('<a target="_blank" href="http://twitter.com/'+c+'">'+c+"</a>")}this.sinceId=a[0].id;this._sortByMagic(a);this.isRunning()&&this._play()}else this.newResults=false;this._setUrl();this._isLive&&this.decay();o.add(this.spinner,"twtr-inactive")},_play:function(){var a=this;this._avatars&&this._preloadImages(this.results);if(this._isRelativeTime&&(this._behavior=="all"||this._behavior==
"preloaded"))this.byClass("twtr-timestamp","a",true).forEach(function(c){c.innerHTML=D(c.getAttribute("time"))});if(!this._isLive||this._behavior=="all"||this._behavior=="preloaded"){this.results.forEach(function(c){if(c.retweeted_status)c=c.retweeted_status;if(a._isProfileWidget){c.from_user=c.user.screen_name;c.profile_image_url=c.user.profile_image_url}if(a._isFavsWidget||a._isListWidget){c.from_user=c.user.screen_name;c.profile_image_url=c.user.profile_image_url}a._createTweet({id:c.id,user:c.from_user,
tweet:E.clean(c.text),avatar:c.profile_image_url,created_at:c.created_at,needle:c});c=a.tweet.element;a._behavior=="all"?a._appendSlideFade(c):a._appendTweet(c)});if(this._behavior!="preloaded")return this}this._insertNewResultsNumber();this.intervalJob=(new q(this.results,this.interval,this._loop,function(c){c.views++;if(a._isProfileWidget){c.from_user=a.username;c.profile_image_url=c.user.profile_image_url}if(a._isFavsWidget||a._isListWidget){c.from_user=c.user.screen_name;c.profile_image_url=c.user.profile_image_url}if(a._isFullScreen)c.profile_image_url=
c.profile_image_url.replace(/_normal\./,"_bigger.");a._createTweet({id:c.id,user:c.from_user,tweet:E.clean(c.text),avatar:c.profile_image_url,created_at:c.created_at,needle:c})._appendSlideFade()})).start(true);return this},_insertNewResultsNumber:function(){if(this.runOnce&&this._isSearchWidget){var a=this.response.total>this.rpp?this.response.total:this.response.results.length,c=a>1?"s":"",f=this.response.warning&&this.response.warning.match(/adjusted since_id/)?"more than":"",j=document.createElement("div");
o.add(j,"twtr-new-results");j.innerHTML='<div class="twtr-results-inner"> &nbsp; </div><div class="twtr-results-hr"> &nbsp; </div><span>'+f+" <strong>"+a+"</strong> new tweet"+c+"</span>";a=this.byClass("twtr-reference-tweet","div");a.parentNode.insertBefore(j,a.nextSibling)}},_preloadImages:function(a){this._isProfileWidget||this._isFavsWidget||this._isListWidget?a.forEach(function(c){(new Image).src=c.user.profile_image_url}):a.forEach(function(c){(new Image).src=c.profile_image_url})},_decayDecider:function(){var a=
false;if(this.runOnce){if(this.newResults)a=true}else a=this.runOnce=true;return a},start:function(){var a=this;if(!this._rendered){setTimeout(function(){a.start.call(a)},50);return this}this._isLive?this.occasionalJob.start():this._getResults();this._hasOfficiallyStarted=this._isRunning=true;return this},stop:function(){this.occasionalJob.stop();this.intervalJob&&this.intervalJob.stop();this._isRunning=false;return this},pause:function(){if(this.isRunning()&&this.intervalJob){this.intervalJob.stop();
o.add(this.widgetEl,"twtr-paused");this._isRunning=false}this._resumeTimer&&clearTimeout(this._resumeTimer);return this},resume:function(){var a=this;if(!this.isRunning()&&this._hasOfficiallyStarted&&this.intervalJob)this._resumeTimer=window.setTimeout(function(){a.intervalJob.start();a._isRunning=true;o.remove(a.widgetEl,"twtr-paused")},2E3);return this},isRunning:function(){return this._isRunning},destroy:function(){this.stop();this.clear();this._profileImage=this.intervalJob=this._hasOfficiallyStarted=
this.runOnce=false;this._isLive=true;this._isRunning=this.newResults=this._isScroll=this._tweetFilter=false;this.sinceId=1;this.results=[];this.showedResults=[];this.occasionalJob.destroy();if(this.jsonRequestRunning){clearTimeout(this.jsonRequestTimer);o.add(this.spinner,"twtr-inactive")}o.remove(this.widgetEl,"twtr-scroll");this.removeEvents();return this}}}()})()}})();